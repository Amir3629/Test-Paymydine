(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8279],{8665:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=function(e){let{src:a,width:t,quality:s=75}=e;if(a.startsWith("http://")||a.startsWith("https://"))return a;if(a.startsWith("/api/media/")){if("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)return a;let e=window.location.hostname,t=window.location.protocol;return"".concat(t,"//").concat(e).concat(a)}return a}},14503:(e,a,t)=>{"use strict";t.d(a,{dj:()=>p});var s=t(12115);let n=0,i=new Map,r=e=>{if(i.has(e))return;let a=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,a)},l=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?r(t):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},c=[],d={toasts:[]};function o(e){d=l(d,e),c.forEach(e=>{e(d)})}function m(e){let{...a}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,a]=s.useState(d);return s.useEffect(()=>(c.push(a),()=>{let e=c.indexOf(a);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},21802:(e,a,t)=>{"use strict";t.d(a,{n:()=>r});var s=t(65453),n=t(46786),i=t(90970);let r=(0,s.v)()((0,n.Zr)((e,a)=>({language:"en",setLanguage:a=>e({language:a}),t:e=>i.P[a().language][e]||i.P.en[e]}),{name:"paymydine-language-storage",storage:(0,n.KU)(()=>localStorage)}))},24446:(e,a,t)=>{"use strict";t.d(a,{x:()=>i});var s=t(65453),n=t(46786);let i=(0,s.v)()((0,n.Zr)(e=>({items:[],isCartOpen:!1,tableInfo:null,addToCart:function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e(e=>{let s=e.items.find(e=>e.item.id===a.id);if(s){let n=s.quantity+t;return n<=0?{items:e.items.filter(e=>e.item.id!==a.id)}:{items:e.items.map(e=>e.item.id===a.id?{...e,quantity:n}:e)}}return t<=0?e:{items:[...e.items,{item:a,quantity:t}]}})},removeFromCart:a=>e(e=>{let t=e.items.find(e=>e.item.id===a.id);return t&&t.quantity>1?{items:e.items.map(e=>e.item.id===a.id?{...e,quantity:e.quantity-1}:e)}:{items:e.items.filter(e=>e.item.id!==a.id)}}),updateQuantity:(a,t)=>e(e=>({items:e.items.map(e=>e.item.id===a?{...e,quantity:t}:e).filter(e=>e.quantity>0)})),clearCart:()=>e({items:[]}),toggleCart:()=>e(e=>({isCartOpen:!e.isCartOpen})),setCartOpen:a=>e({isCartOpen:a}),setTableInfo:a=>e({tableInfo:a})}),{name:"paymydine-cart-storage",storage:(0,n.KU)(()=>localStorage)}))},28754:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>k});var s=t(95155),n=t(12115),i=t(66766),r=t(35695),l=t(43463),c=t(60760),d=t(39785),o=t(35169),m=t(81586),p=t(32919),h=t(17580),u=t(5196),g=t(24446),y=t(21802),x=t(78525),b=t(97168),f=t(14503),v=t(89852),N=t(82714),w=t(53999),j=t(49509);function k(){let e=(0,r.useRouter)(),{toast:a}=(0,f.dj)(),{t}=(0,y.n)(),{items:j,clearCart:k}=(0,g.x)(),{paymentOptions:S,tipSettings:P,merchantSettings:C}=(0,x.W)(),[D,T]=(0,n.useState)(!1),[A,z]=(0,n.useState)(!1),[I,M]=(0,n.useState)({}),[E,O]=(0,n.useState)(P.defaultPercentage),[F,_]=(0,n.useState)(""),[K,R]=(0,n.useState)(null),[L,q]=(0,n.useState)({cardNumber:"",expiryDate:"",cvv:"",cardholderName:"",email:"",phone:""});if((0,n.useEffect)(()=>{0===j.length&&e.push("/")},[j.length,e]),0===j.length)return null;let B=j.flatMap((e,a)=>Array.from({length:e.quantity}).map((t,s)=>({cartIndex:a,item:e.item,price:e.item.price,key:"".concat(e.item.id,"-").concat(a,"-").concat(s)}))),W=A?Object.values(I):j.flatMap(e=>Array.from({length:e.quantity}).map(()=>({item:e.item,price:e.item.price}))),$=(0,n.useMemo)(()=>W.reduce((e,a)=>e+a.price,0),[W]),V=.1*$,G=Math.max(0,Number(F)||0),U=F?G:E/100*$,H=$+V+U,Z=async s=>{try{T(!0);let n=await fetch("/api/process-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethod:K,amount:H,currency:"USD",items:W,customerInfo:L,merchantAccount:C.accountId,...s})}),i=await n.json();if(i.success)a({title:t("paymentSuccessful"),description:t("paymentSuccessfulDesc"),variant:"default"}),setTimeout(()=>{k(),e.push("/order-placed")},1500);else throw Error(i.error||"Payment failed")}catch(e){console.error("Payment error:",e),a({title:"Payment Failed",description:e instanceof Error?e.message:"Please try again",variant:"destructive"})}finally{T(!1)}},Y=async()=>{if(K)switch(K){case"visa":case"mastercard":await Z({card:{number:L.cardNumber.replace(/\s/g,""),expiry:L.expiryDate.replace(/\s/g,""),cvv:L.cvv,name:L.cardholderName}});break;case"paypal":window.paypal&&window.paypal.Buttons({createOrder:(e,a)=>a.order.create({purchase_units:[{amount:{value:H.toFixed(2)}}]}),onApprove:async(e,a)=>{let t=await a.order.capture();await Z({paypalOrderId:t.id})}}).render("#paypal-button-container");break;case"applepay":window.ApplePaySession&&new window.ApplePaySession(3,{countryCode:"US",currencyCode:"USD",supportedNetworks:["visa","masterCard","amex"],merchantCapabilities:["supports3DS"],total:{label:C.businessName||"PayMyDine",amount:H.toFixed(2)}}).begin();break;case"googlepay":await Z({provider:"googlepay"});break;case"cash":await Z({provider:"cash"});break;default:a({title:"Error",description:"Please select a payment method",variant:"destructive"})}},J=e=>{M(a=>{let t={...a};return t[e.key]?delete t[e.key]:t[e.key]=e,t})},Q=e=>{R(e)},X=()=>{R(null)},ee=(e,a)=>{q(t=>({...t,[e]:a}))},ea=e=>{let a=e.replace(/\s+/g,"").replace(/[^0-9]/gi,""),t=a.match(/\d{4,16}/g),s=t&&t[0]||"",n=[];for(let e=0,a=s.length;e<a;e+=4)n.push(s.substring(e,e+4));return n.length?n.join(" "):a},et=e=>{let a=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return a.length>=2?a.substring(0,2)+" / "+a.substring(2,4):a},es=[{id:"visa",icon:"/images/visa.png",name:"Visa"},{id:"mastercard",icon:"/images/mastercard.png",name:"Mastercard"},{id:"paypal",icon:"/images/paypal.png",name:"PayPal"},{id:"applepay",icon:"/images/Apple pay.png",name:"Apple Pay"},{id:"googlepay",icon:"/images/google pay.png",name:"Google Pay"},{id:"cash",icon:d.A,name:"Cash"}].filter(e=>S.find(a=>a.id===e.id&&a.enabled)),en=es.find(e=>e.id===K);return(0,s.jsx)("div",{className:"min-h-screen bg-theme pb-8",children:(0,s.jsxs)("div",{className:"container max-w-4xl mx-auto px-4 py-8",children:[(0,s.jsxs)(b.$,{variant:"ghost",className:"mb-6 text-paydine-elegant-gray hover:text-paydine-elegant-gray/80",onClick:()=>e.back(),children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"}),t("back")]}),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-3xl p-6 shadow-lg border border-paydine-champagne/20",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-paydine-elegant-gray",children:t("orderSummary")}),j.map(e=>{let{item:a,quantity:n}=e,i=t(a.nameKey)||a.name;return(0,s.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-paydine-champagne/20 last:border-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"text-paydine-elegant-gray",children:[n,"x"]}),(0,s.jsx)("span",{className:"text-paydine-elegant-gray",children:i})]}),(0,s.jsxs)("span",{className:"text-paydine-elegant-gray font-semibold",children:["$",(a.price*n).toFixed(2)]})]},a.id)}),(0,s.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-paydine-elegant-gray",children:[(0,s.jsx)("span",{children:t("subtotal")}),(0,s.jsxs)("span",{className:"font-semibold",children:["$",$.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-paydine-elegant-gray",children:[(0,s.jsxs)("span",{children:[t("service")," (10%)"]}),(0,s.jsxs)("span",{className:"font-semibold",children:["$",V.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-paydine-elegant-gray",children:[(0,s.jsx)("span",{children:t("tip")}),(0,s.jsxs)("span",{className:"font-semibold",children:["$",U.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-xl font-bold pt-2 border-t border-paydine-champagne/20",children:[(0,s.jsx)("span",{className:"text-paydine-elegant-gray",children:t("total")}),(0,s.jsxs)("span",{className:"text-paydine-rose-beige",children:["$",H.toFixed(2)]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-paydine-rose-beige/10 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 text-paydine-champagne"}),(0,s.jsx)("span",{className:"font-medium text-paydine-elegant-gray text-xs",children:t("splitBill")})]}),(0,s.jsx)(b.$,{variant:A?"default":"outline",size:"sm",onClick:()=>z(!A),className:A?"bg-paydine-champagne text-paydine-elegant-gray text-xs":"border-paydine-champagne/30 text-xs",children:A?"ON":"OFF"})]}),A?(0,s.jsxs)("div",{className:"bg-white/50 rounded-2xl p-3 border border-paydine-champagne/20 overflow-hidden",children:[(0,s.jsx)("h3",{className:"font-semibold text-paydine-elegant-gray mb-2 text-xs",children:t("selectItemsToPay")}),(0,s.jsx)("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:B.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs p-2 rounded-lg cursor-pointer hover:bg-paydine-champagne/10",onClick:()=>J(e),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:(0,w.cn)("w-4 h-4 rounded-md border-2 flex items-center justify-center transition-all",I[e.key]?"bg-paydine-champagne border-paydine-champagne":"border-gray-300"),children:I[e.key]&&(0,s.jsx)(u.A,{className:"w-3 h-3 text-paydine-elegant-gray"})}),(0,s.jsx)("span",{className:"text-gray-600",children:t(e.item.nameKey)})]}),(0,s.jsxs)("span",{className:"text-paydine-champagne font-medium",children:["$",e.price.toFixed(2)]})]},e.key))})]}):(0,s.jsxs)("div",{className:"bg-white/50 rounded-2xl p-3 border border-paydine-champagne/20",children:[(0,s.jsx)("h3",{className:"font-semibold text-paydine-elegant-gray mb-2 text-xs",children:t("orderSummary")}),(0,s.jsx)("div",{className:"space-y-2",children:j.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs p-2 rounded-lg",children:[(0,s.jsxs)("span",{className:"text-gray-600 min-w-[120px]",children:[e.quantity,"x ",t(e.item.nameKey)]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("span",{className:"text-paydine-champagne font-medium min-w-[48px] text-center",children:["$",(e.item.price*e.quantity).toFixed(2)]})})]},e.item.id))})]}),P.enabled&&(0,s.jsxs)("div",{className:"bg-white/50 rounded-2xl p-3 border border-paydine-champagne/20",children:[(0,s.jsx)("h3",{className:"font-semibold text-paydine-elegant-gray mb-2 text-xs",children:t("addTip")}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"flex gap-2",children:P.percentages.map(e=>(0,s.jsxs)(b.$,{variant:E!==e||F?"outline":"default",size:"sm",onClick:()=>{O(e),_("")},className:E!==e||F?"border-paydine-champagne/30 text-xs":"bg-paydine-champagne text-paydine-elegant-gray text-xs",children:[e,"%"]},e))}),(0,s.jsx)(()=>{let[e,a]=(0,n.useState)("0"),t=t=>{if("0"===e&&"."!==t)a(t);else{if("."===t&&e.includes("."))return;a(e=>e+t)}_(e+t)};return(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("div",{className:"relative mb-2",children:(0,s.jsxs)("div",{className:"w-full h-8 px-3 py-1 bg-white rounded-md border border-paydine-champagne/30 flex items-center",children:[(0,s.jsx)("span",{className:"text-gray-400 mr-1",children:"$"}),(0,s.jsx)("span",{className:"text-right flex-grow text-sm",children:e})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-1",children:[["1","2","3","4","5","6","7","8","9"].map(e=>(0,s.jsx)("button",{onClick:()=>t(e),className:"p-2 text-sm bg-white hover:bg-paydine-champagne/10 rounded-md border border-paydine-champagne/30",children:e},e)),(0,s.jsx)("button",{onClick:()=>t("."),className:"p-2 text-sm bg-white hover:bg-paydine-champagne/10 rounded-md border border-paydine-champagne/30",children:"."}),(0,s.jsx)("button",{onClick:()=>t("0"),className:"p-2 text-sm bg-white hover:bg-paydine-champagne/10 rounded-md border border-paydine-champagne/30",children:"0"}),(0,s.jsx)("button",{onClick:()=>{if(e.length>1){let t=e.slice(0,-1);a(t),_(t)}else a("0"),_("0")},className:"p-2 text-sm bg-white hover:bg-paydine-champagne/10 rounded-md border border-paydine-champagne/30 text-paydine-champagne",children:"←"})]})]})},{})]})]}),(0,s.jsxs)("div",{className:"bg-paydine-rose-beige/20 rounded-2xl p-3 space-y-1 border border-paydine-champagne/20",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-paydine-elegant-gray",children:[(0,s.jsx)("span",{children:t("subtotal")}),(0,s.jsxs)("span",{className:"font-semibold",children:["$",$.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-paydine-elegant-gray",children:[(0,s.jsx)("span",{children:t("service")}),(0,s.jsxs)("span",{className:"font-semibold",children:["$",V.toFixed(2)]})]}),U>0&&(0,s.jsxs)("div",{className:"flex justify-between text-xs text-paydine-elegant-gray",children:[(0,s.jsx)("span",{children:t("tip")}),(0,s.jsxs)("span",{className:"font-semibold",children:["$",U.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-t border-paydine-champagne/30 pt-2 mt-2",children:[(0,s.jsx)("span",{className:"font-serif text-base text-paydine-elegant-gray",children:t("total")}),(0,s.jsxs)("span",{className:"font-bold text-base text-paydine-rose-beige",children:["$",H.toFixed(2)]})]})]}),(0,s.jsx)(c.N,{mode:"wait",children:K?(0,s.jsx)(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"pt-2",children:(()=>{if(!en)return null;switch(en.id){case"visa":case"mastercard":return(0,s.jsxs)(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(b.$,{variant:"ghost",size:"sm",onClick:X,className:"p-2",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.default,{src:en.icon,alt:en.name,width:32,height:20,className:"object-contain"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:en.name})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(N.J,{htmlFor:"cardNumber",className:"text-sm font-medium text-paydine-elegant-gray",children:"Card Number"}),(0,s.jsx)(v.p,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",value:L.cardNumber,onChange:e=>ee("cardNumber",ea(e.target.value)),maxLength:19,className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(N.J,{htmlFor:"expiryDate",className:"text-sm font-medium text-paydine-elegant-gray",children:"Expiry Date"}),(0,s.jsx)(v.p,{id:"expiryDate",type:"text",placeholder:"MM / YY",value:L.expiryDate,onChange:e=>ee("expiryDate",et(e.target.value)),maxLength:7,className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(N.J,{htmlFor:"cvv",className:"text-sm font-medium text-paydine-elegant-gray",children:"CVV"}),(0,s.jsx)(v.p,{id:"cvv",type:"text",placeholder:"123",value:L.cvv,onChange:e=>ee("cvv",e.target.value.replace(/\D/g,"")),maxLength:4,className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(N.J,{htmlFor:"cardholderName",className:"text-sm font-medium text-paydine-elegant-gray",children:"Cardholder Name"}),(0,s.jsx)(v.p,{id:"cardholderName",type:"text",placeholder:"John Doe",value:L.cardholderName,onChange:e=>ee("cardholderName",e.target.value),className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]})]})]});case"paypal":return(0,s.jsxs)(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(b.$,{variant:"ghost",size:"sm",onClick:X,className:"p-2",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.default,{src:en.icon,alt:en.name,width:32,height:20,className:"object-contain"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:en.name})]})]}),(0,s.jsx)("div",{id:"paypal-button-container"})]});case"applepay":case"googlepay":return(0,s.jsxs)(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(b.$,{variant:"ghost",size:"sm",onClick:X,className:"p-2",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.default,{src:en.icon,alt:en.name,width:32,height:20,className:"object-contain"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:en.name})]})]}),(0,s.jsx)("div",{className:"text-center space-y-4",children:(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,s.jsx)(m.A,{className:"h-12 w-12 text-paydine-champagne mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"applepay"===en.id?"Touch ID or Face ID to pay with Apple Pay":"Use your saved payment method with Google Pay"}),(0,s.jsxs)("div",{className:"text-lg font-bold text-paydine-elegant-gray",children:["Total: $",H.toFixed(2)]})]})})]});case"cash":return(0,s.jsxs)(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(b.$,{variant:"ghost",size:"sm",onClick:X,className:"p-2",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"h-6 w-6 text-paydine-champagne"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:"Cash Payment"})]})]}),(0,s.jsx)("div",{className:"text-center space-y-4",children:(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,s.jsx)(d.A,{className:"h-12 w-12 text-paydine-champagne mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Please have the exact amount ready when the waiter comes to collect payment."}),(0,s.jsxs)("div",{className:"text-lg font-bold text-paydine-elegant-gray",children:["Total: $",H.toFixed(2)]})]})})]});default:return null}})()},"payment-form"):(0,s.jsxs)(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3 pt-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-paydine-elegant-gray text-center text-sm",children:t("paymentMethods")}),(0,s.jsx)("div",{className:"flex justify-center items-center gap-3 flex-wrap",children:es.map(e=>(0,s.jsx)(l.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,s.jsx)(b.$,{variant:"outline",className:"h-14 w-20 bg-white hover:bg-gray-50 border-gray-200 rounded-2xl shadow-sm flex items-center justify-center",onClick:()=>Q(e.id),children:"string"==typeof e.icon?(0,s.jsx)(i.default,{src:e.icon||"/placeholder.svg",alt:e.id,width:40,height:20,className:"object-contain"}):(0,s.jsx)(e.icon,{className:"h-12 w-12 text-paydine-elegant-gray"})})},e.id))})]},"payment-methods")})]}),(0,s.jsx)(c.N,{children:K&&(0,s.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"p-4 border-t border-paydine-champagne/20 bg-white/95",children:en?(0,s.jsx)(b.$,{onClick:Y,disabled:D||!(()=>{switch(en.id){case"visa":case"mastercard":return L.cardNumber&&L.expiryDate&&L.cvv&&L.cardholderName;case"paypal":case"applepay":case"googlepay":case"cash":return!0;default:return!1}})(),className:"w-full bg-gradient-to-r from-paydine-champagne to-paydine-rose-beige hover:from-paydine-champagne/90 hover:to-paydine-rose-beige/90 text-paydine-elegant-gray font-bold py-3 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl",children:D?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),(()=>{switch(en.id){case"visa":case"mastercard":return"Pay $".concat(H.toFixed(2));case"paypal":return"Continue with PayPal";case"applepay":case"googlepay":return"Pay with ".concat(en.name);case"cash":return"Confirm Cash Payment";default:return"Pay"}})()]})}):null})})]})})}j.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY,j.env.NEXT_PUBLIC_PAYPAL_CLIENT_ID},34651:(e,a,t)=>{Promise.resolve().then(t.bind(t,28754))},53999:(e,a,t)=>{"use strict";t.d(a,{cn:()=>i});var s=t(52596),n=t(39688);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,n.QP)((0,s.$)(a))}},72226:(e,a,t)=>{"use strict";t.d(a,{Gq:()=>i,K$:()=>l,LZ:()=>r});var s=t(30098);let n=(e,a)=>{var t;return{id:e.id,name:e.name,nameKey:void 0,description:e.description||"",descriptionKey:void 0,price:e.price,image:e.image||"/placeholder.svg?width=200&height=200",category:a||e.category_name||"Main Course",category_id:e.category_id,category_name:e.category_name,calories:e.calories||Math.floor(600*Math.random())+300,allergens:e.allergens||[],stock_qty:e.stock_qty,minimum_qty:e.minimum_qty||1,available:!1!==e.available&&(null===e.stock_qty||(null!==(t=e.stock_qty)&&void 0!==t?t:0)>0)}};async function i(){try{var e,a;let t=await s.u.getMenu(),i=(null===(e=t.data.items)||void 0===e?void 0:e.map(e=>n(e,e.category_name)))||[],r=(null===(a=t.data.categories)||void 0===a?void 0:a.map(e=>e.name))||[],l={};return i.forEach(e=>{let a=e.category;l[a]||(l[a]=[]),l[a].push(e)}),{categories:Object.values(l),menuItems:i,categoryNames:r}}catch(e){return console.error("Failed to fetch menu data from API, using fallback data:",e),{categories:[],menuItems:l,categoryNames:[]}}}let r=[],l=[]},78525:(e,a,t)=>{"use strict";t.d(a,{W:()=>o});var s=t(65453),n=t(46786),i=t(72226);let r={appName:"PayMyDine",logoUrl:"",tableNumber:7},l=[{id:"visa",enabled:!0},{id:"mastercard",enabled:!0},{id:"paypal",enabled:!0},{id:"cash",enabled:!0},{id:"applepay",enabled:!0},{id:"googlepay",enabled:!0}],c={enabled:!0,percentages:[10,15,20],defaultPercentage:15},d={businessName:"PayMyDine Restaurant",accountId:"",stripeSecretKey:"",stripePublishableKey:"",paypalClientId:"",paypalClientSecret:"",bankAccountNumber:"",bankRoutingNumber:"",bankName:"",currency:"USD",countryCode:"US"},o=(0,s.v)()((0,n.Zr)((e,a)=>({settings:r,menuItems:i.K$,paymentOptions:l,tipSettings:c,merchantSettings:d,isInitialized:!1,updateSettings:a=>e(e=>({settings:{...e.settings,...a}})),updateMenuItem:a=>e(e=>({menuItems:e.menuItems.map(e=>e.id===a.id?a:e)})),setMenuItems:a=>e({menuItems:a}),togglePaymentOption:a=>e(e=>({paymentOptions:e.paymentOptions.map(e=>e.id===a?{...e,enabled:!e.enabled}:e)})),updateTipSettings:a=>e(e=>({tipSettings:{...e.tipSettings,...a}})),updateMerchantSettings:a=>e(e=>({merchantSettings:{...e.merchantSettings,...a}}))}),{name:"paymydine-cms-storage",storage:(0,n.KU)(()=>localStorage),onRehydrateStorage:()=>e=>{e&&(e.isInitialized=!0)}}))},82714:(e,a,t)=>{"use strict";t.d(a,{J:()=>d});var s=t(95155),n=t(12115),i=t(40968),r=t(74466),l=t(53999);let c=(0,r.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(i.b,{ref:a,className:(0,l.cn)(c(),t),...n})});d.displayName=i.b.displayName},89852:(e,a,t)=>{"use strict";t.d(a,{p:()=>r});var s=t(95155),n=t(12115),i=t(53999);let r=n.forwardRef((e,a)=>{let{className:t,type:n,...r}=e;return(0,s.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...r})});r.displayName="Input"},90970:(e,a,t)=>{"use strict";t.d(a,{P:()=>s});let s={en:{appName:"PayMyDine",tableNumber:"Table",valetParking:"Valet Parking",menuCard:"Menu",starters:"Starters",mains:"Mains",vegan:"Vegan",desserts:"Desserts",drinks:"Drinks",backToHome:"Back to Home",valetService:"Valet Parking Service",enterName:"Enter your name",enterPhone:"Enter your phone number",carDetails:"Car Details",enterCarDetails:"Make, model, and color",licensePlate:"License Plate",enterLicensePlate:"Enter license plate number",requestValet:"Request Valet Service",valetAvailability:"Our valet service is available during restaurant hours.",valetTicket:"Please have your ticket ready when retrieving your vehicle.",sultansPilaf:"Sultan's Pilaf",sultansPilafDesc:"Aromatic rice cooked with tender lamb, carrots, and exotic spices, slow-cooked to perfection in a clay pot.",tuscanPasta:"Tuscan Sausage Pasta",tuscanPastaDesc:"Hearty rigatoni tossed in a creamy mustard and white wine sauce, with savory Italian sausage and fresh basil.",connoisseurSteak:"The Connoisseur's Steak",connoisseurSteakDesc:"8oz of perfectly seared A5 Wagyu steak, served with a silky parsnip pur\xe9e, saut\xe9ed mushrooms, and a rich red wine reduction.",spicedChili:"Spiced Lentil Chili",spicedChiliDesc:"A robust and smoky chili featuring a medley of black beans and lentils, simmered with corn, tomatoes, and a hint of jalape\xf1o.",oceanHalibut:"Ocean Jewel Halibut",oceanHalibutDesc:"Delicate, pan-seared Norwegian halibut resting on a bed of wilted greens, adorned with citrus gel and a vibrant herb oil.",royalNasiLemak:"Royal Nasi Lemak",royalNasiLemakDesc:"Fragrant coconut rice accompanied by a crispy fried chicken leg, spicy sambal, fried anchovies, peanuts, and a hard-boiled egg.",zenGarden:"Zen Garden Bowl",zenGardenDesc:"A nourishing bowl of quinoa, roasted sweet potatoes, avocado, edamame, and pickled ginger with a miso-tahini dressing.",goldenLava:"Golden Lava Cake",goldenLavaDesc:"A decadent dark chocolate cake with a molten gold-dusted caramel center, served with vanilla bean ice cream.",rosewaterSpritz:"Rosewater Lychee Spritz",rosewaterSpritzDesc:"A refreshing non-alcoholic spritz with lychee, rosewater, sparkling water, and a hint of mint.",addTip:"Add a Tip",tip:"Tip",custom:"Custom",selectItemsToPay:"Select items to pay",callWaiter:"Call Waiter",leaveNote:"Leave Note",viewCart:"View Cart",packFood:"Pack Food",yourOrder:"Your Order",cartEmpty:"Your cart is empty.",addItemsFromMenu:"Add some delicious items from the menu.",total:"Total",proceedToPayment:"Proceed to Payment",confirmPayment:"Confirm Payment",subtotal:"Subtotal",service:"Service (10%)",splitBill:"Split Bill",paymentMethods:"Payment Methods",applePay:"Apple Pay",googlePay:"Google Pay",paypal:"PayPal",creditCard:"Credit Card",cash:"Cash",cardNumber:"Card Number",expiryDate:"MM / YY",cvc:"CVC",processing:"Processing...",payNow:"Pay Now",orderSummary:"Order Summary",details:"Details",calories:"Calories",allergens:"Allergens",none:"None",addToOrder:"Add to Order",confirmAction:"Confirm Action",callWaiterConfirm:"Would you like to call a waiter to your table?",packFoodConfirm:"Would you like us to pack your remaining food?",leaveNoteTitle:"Leave a Note",leaveNoteDesc:"Any special requests for the kitchen or your waiter?",notePlaceholder:"e.g., 'Allergic to peanuts' or 'Extra spicy, please!'",waiterCalled:"Waiter Called",waiterCalledDesc:"A waiter is on their way to your table.",waiterComing:"A water is coming to your table!",packingRequested:"Packing Requested",packingRequestedDesc:"We will pack your remaining food.",noteSent:"Note Sent",noteSentDesc:"Your note has been sent to the kitchen.",messageReceived:"Message Received!",messageReceivedDesc:"We have received your message and will get back to you soon.",paymentSuccessful:"Payment Successful!",paymentSuccessfulDesc:"Thank you for your payment!",addedToCart:"Added to Cart",addedToCartDesc:"has been added to your order.",thankYou:"Thank You!",orderPlacedSuccess:"Your order has been placed successfully.",orderSentToKitchen:"Order Sent to Kitchen",chefPreparing:"Chef is Preparing Your Meal",onWayToTable:"On Its Way to Your Table!",needRide:"Need a ride?",callUber:"Call an Uber",getBolt:"Get a Bolt",orderMore:"Menu",cancel:"Cancel",confirm:"Confirm",sendNote:"Send Note",yes:"Yes",no:"No",close:"Close",quantity:"Quantity",submitting:"Submitting...",valetRequestSuccess:"Valet Request Successful",valetConfirmation:"Your valet request has been received. A valet attendant will assist you shortly.",optional:"(optional)"},de:{appName:"PayMyDine",tableNumber:"Tisch",valetParking:"Parkservice",menuCard:"Speisekarte",backToHome:"Zur\xfcck zur Startseite",valetService:"Parkservice",enterName:"Name eingeben",enterPhone:"Telefonnummer eingeben",carDetails:"Fahrzeugdetails",enterCarDetails:"Marke, Modell und Farbe",licensePlate:"Kennzeichen",enterLicensePlate:"Kennzeichen eingeben",requestValet:"Parkservice anfordern",valetAvailability:"Unser Parkservice ist w\xe4hrend der Restaurant\xf6ffnungszeiten verf\xfcgbar.",valetTicket:"Bitte halten Sie Ihr Ticket bereit, wenn Sie Ihr Fahrzeug abholen.",starters:"Vorspeisen",mains:"Hauptgerichte",vegan:"Vegan",desserts:"Desserts",drinks:"Getr\xe4nke",sultansPilaf:"Sultan's Pilaf",sultansPilafDesc:"Aromatischer Reis mit zartem Lamm, Karotten und exotischen Gew\xfcrzen, langsam in einem Tontopf gekocht.",tuscanPasta:"Toskanische Wurst-Pasta",tuscanPastaDesc:"Herzhafte Rigatoni in cremiger Senf-Wei\xdfwein-Sauce mit w\xfcrziger italienischer Wurst und frischem Basilikum.",connoisseurSteak:"Das Kenner-Steak",connoisseurSteakDesc:"8oz perfekt angebratenes A5 Wagyu-Steak mit seidigem Pastinaken-P\xfcree, sautierten Pilzen und reichhaltiger Rotweinreduktion.",spicedChili:"Gew\xfcrztes Linsen-Chili",spicedChiliDesc:"Ein kr\xe4ftiges und rauchiges Chili mit schwarzen Bohnen und Linsen, geschmort mit Mais, Tomaten und einem Hauch Jalape\xf1o.",oceanHalibut:"Ozean-Juwel Heilbutt",oceanHalibutDesc:"Zarter, angebratener norwegischer Heilbutt auf einem Bett aus welkem Gr\xfcn, garniert mit Zitrus-Gel und lebhaftem Kr\xe4uter\xf6l.",royalNasiLemak:"K\xf6nigliches Nasi Lemak",royalNasiLemakDesc:"Duftender Kokosnussreis mit knusprigem H\xe4hnchenschenkel, w\xfcrzigem Sambal, frittierten Sardellen, Erdn\xfcssen und gekochtem Ei.",zenGarden:"Zen-Garten-Bowl",zenGardenDesc:"Eine nahrhafte Sch\xfcssel mit Quinoa, ger\xf6steten S\xfc\xdfkartoffeln, Avocado, Edamame und eingelegtem Ingwer mit Miso-Tahini-Dressing.",goldenLava:"Goldener Lava-Kuchen",goldenLavaDesc:"Ein dekadenter dunkler Schokoladenkuchen mit geschmolzenem, goldbest\xe4ubtem Karamellkern, serviert mit Vanille-Eis.",rosewaterSpritz:"Rosenwasser-Litschi-Spritz",rosewaterSpritzDesc:"Ein erfrischender alkoholfreier Spritz mit Litschi, Rosenwasser, Sprudelwasser und einem Hauch Minze.",addTip:"Trinkgeld hinzuf\xfcgen",tip:"Trinkgeld",custom:"Andere",selectItemsToPay:"Artikel zum Bezahlen ausw\xe4hlen",callWaiter:"Kellner rufen",leaveNote:"Notiz hinterlassen",viewCart:"Warenkorb",packFood:"Essen einpacken",yourOrder:"Ihre Bestellung",cartEmpty:"Ihr Warenkorb ist leer.",addItemsFromMenu:"F\xfcgen Sie k\xf6stliche Gerichte aus der Speisekarte hinzu.",total:"Gesamt",proceedToPayment:"Zur Zahlung",confirmPayment:"Zahlung best\xe4tigen",subtotal:"Zwischensumme",service:"Service (10%)",splitBill:"Rechnung teilen",paymentMethods:"Zahlungsmethoden",applePay:"Apple Pay",googlePay:"Google Pay",paypal:"PayPal",creditCard:"Kreditkarte",cash:"Bar",cardNumber:"Kartennummer",expiryDate:"MM / JJ",cvc:"CVC",processing:"Verarbeitung...",payNow:"Jetzt bezahlen",orderSummary:"Bestell\xfcbersicht",details:"Details",calories:"Kalorien",allergens:"Allergene",none:"Keine",addToOrder:"Zur Bestellung hinzuf\xfcgen",confirmAction:"Aktion best\xe4tigen",callWaiterConfirm:"Einen Kellner an Ihren Tisch rufen?",packFoodConfirm:"Essen zum Mitnehmen bestellen?",leaveNoteTitle:"Notiz hinterlassen",leaveNoteDesc:"Besondere W\xfcnsche f\xfcr die K\xfcche oder Ihren Kellner?",notePlaceholder:"z.B. 'Allergie gegen Erdn\xfcsse' oder 'Extra scharf, bitte!'",waiterCalled:"Kellner gerufen",waiterCalledDesc:"Ein Kellner ist auf dem Weg zu Ihrem Tisch.",waiterComing:"Der Kellner kommt zu Ihrem Tisch!",packingRequested:"Einpacken angefordert",packingRequestedDesc:"Wir werden Ihr restliches Essen einpacken.",noteSent:"Notiz gesendet",noteSentDesc:"Ihre Notiz wurde an die K\xfcche gesendet.",messageReceived:"Nachricht erhalten!",messageReceivedDesc:"Wir haben Ihre Nachricht erhalten und werden uns bald bei Ihnen melden.",paymentSuccessful:"Zahlung erfolgreich!",paymentSuccessfulDesc:"Vielen Dank f\xfcr Ihre Zahlung!",addedToCart:"Zum Warenkorb hinzugef\xfcgt",addedToCartDesc:"wurde zu Ihrer Bestellung hinzugef\xfcgt.",thankYou:"Vielen Dank!",orderPlacedSuccess:"Ihre Bestellung wurde erfolgreich aufgegeben.",orderSentToKitchen:"Bestellung an die K\xfcche gesendet",chefPreparing:"Koch bereitet Ihr Essen zu",onWayToTable:"Auf dem Weg zu Ihrem Tisch!",needRide:"Brauchen Sie eine Fahrt?",callUber:"Uber rufen",getBolt:"Bolt holen",orderMore:"Men\xfc",cancel:"Abbrechen",confirm:"Best\xe4tigen",sendNote:"Notiz senden",yes:"Ja",no:"Nein",close:"Schlie\xdfen",quantity:"Menge",submitting:"Wird gesendet...",valetRequestSuccess:"Parkservice-Anfrage erfolgreich",valetConfirmation:"Ihre Parkservice-Anfrage wurde empfangen. Ein Parkservice-Mitarbeiter wird Ihnen in K\xfcrze zur Verf\xfcgung stehen.",optional:"(optional)"}}},97168:(e,a,t)=>{"use strict";t.d(a,{$:()=>d});var s=t(95155),n=t(12115),i=t(99708),r=t(74466),l=t(53999);let c=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,a)=>{let{className:t,variant:n,size:r,asChild:d=!1,...o}=e,m=d?i.DX:"button";return(0,s.jsx)(m,{className:(0,l.cn)(c({variant:n,size:r,className:t})),ref:a,...o})});d.displayName="Button"}},e=>{var a=a=>e(e.s=a);e.O(0,[9352,8009,3463,6766,339,98,8441,1684,7358],()=>a(34651)),_N_E=e.O()}]);