(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4904],{11202:(e,a,t)=>{Promise.resolve().then(t.bind(t,93102))},14503:(e,a,t)=>{"use strict";t.d(a,{dj:()=>p});var s=t(12115);let i=0,n=new Map,l=e=>{if(n.has(e))return;let a=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,a)},r=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},c=[],o={toasts:[]};function d(e){o=r(o,e),c.forEach(e=>{e(o)})}function m(e){let{...a}=e,t=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,a]=s.useState(o);return s.useEffect(()=>(c.push(a),()=>{let e=c.indexOf(a);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},82714:(e,a,t)=>{"use strict";t.d(a,{J:()=>o});var s=t(95155),i=t(12115),n=t(40968),l=t(74466),r=t(53999);let c=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(n.b,{ref:a,className:(0,r.cn)(c(),t),...i})});o.displayName=n.b.displayName},89335:(e,a,t)=>{"use strict";t.d(a,{p:()=>n});var s=t(95155);t(12115);var i=t(66766);function n(e){let{src:a,alt:t,fill:n=!1,width:l,height:r,className:c,priority:o=!1,quality:d=75,...m}=e;return n?(0,s.jsx)(i.default,{src:a,alt:t,fill:!0,className:c,priority:o,quality:d,...m}):(0,s.jsx)(i.default,{src:a,alt:t,width:l,height:r,className:c,priority:o,quality:d,...m})}},89852:(e,a,t)=>{"use strict";t.d(a,{p:()=>l});var s=t(95155),i=t(12115),n=t(53999);let l=i.forwardRef((e,a)=>{let{className:t,type:i,...l}=e;return(0,s.jsx)("input",{type:i,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...l})});l.displayName="Input"},93102:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>eo});var s=t(95155),i=t(11518),n=t.n(i),l=t(12115);function r(e,a){var t,s;let i="number"==typeof e?e:0,n=null!==(t=null==a?void 0:a.currency)&&void 0!==t?t:"EUR",l=null!==(s=null==a?void 0:a.locale)&&void 0!==s?s:"en-IE";try{return new Intl.NumberFormat(l,{style:"currency",currency:n,minimumFractionDigits:2,maximumFractionDigits:2}).format(i)}catch(e){return"â‚¬".concat(i.toFixed(2))}}var c=t(72226),o=t(21802),d=t(78525),m=t(24446),p=t(91725),x=t(89335),h=t(43463),g=t(60760),y=t(87712),u=t(84616),f=t(62525),b=t(97168),j=t(33651),v=t(74466),N=t(54416),w=t(53999);let k=j.bL;j.l9,j.bm;let P=j.ZL,C=l.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(j.hJ,{className:(0,w.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...i,ref:a})});C.displayName=j.hJ.displayName;let A=(0,v.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),S=l.forwardRef((e,a)=>{let{side:t="right",className:i,children:n,...l}=e;return(0,s.jsxs)(P,{children:[(0,s.jsx)(C,{}),(0,s.jsxs)(j.UC,{ref:a,className:(0,w.cn)(A({side:t}),i),...l,children:[n,(0,s.jsxs)(j.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(N.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});S.displayName=j.UC.displayName;let T=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,w.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};T.displayName="SheetHeader";let _=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,w.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};_.displayName="SheetFooter";let E=l.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(j.hE,{ref:a,className:(0,w.cn)("text-lg font-semibold text-foreground",t),...i})});E.displayName=j.hE.displayName,l.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(j.VY,{ref:a,className:(0,w.cn)("text-sm text-muted-foreground",t),...i})}).displayName=j.VY.displayName;var z=t(14503),O=t(35695);function F(){let{toast:e}=(0,z.dj)(),{t:a}=(0,o.n)(),t=(0,O.useRouter)(),{items:i,isCartOpen:n,toggleCart:l,updateQuantity:c,removeFromCart:d}=(0,m.x)(),p=i.reduce((e,a)=>e+a.item.price*a.quantity,0);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(k,{open:n,onOpenChange:l,children:(0,s.jsxs)(S,{className:"w-full max-w-md flex flex-col bg-gradient-to-br from-paydine-soft-white to-paydine-soft-white/95 p-0 border-l-paydine-champagne/30",children:[(0,s.jsx)(T,{className:"p-4 pb-2 bg-gradient-to-r from-paydine-champagne/10 to-paydine-rose-beige/10 border-b border-paydine-champagne/20",children:(0,s.jsx)(E,{className:"font-serif text-3xl text-paydine-elegant-gray",children:a("yourOrder")})}),(0,s.jsx)(h.P.div,{className:"flex-grow overflow-y-auto p-4 space-y-2",layout:!0,transition:{type:"spring",stiffness:300,damping:30},children:0===i.length?(0,s.jsxs)("div",{className:"text-center text-gray-500 pt-8 space-y-2",children:[(0,s.jsx)("p",{className:"text-lg",children:a("cartEmpty")}),(0,s.jsx)("p",{className:"text-sm",children:a("addItemsFromMenu")})]}):(0,s.jsx)(g.N,{mode:"popLayout",children:i.map(e=>{let{item:t,quantity:i}=e,n=a(t.nameKey)||t.name;return(0,s.jsxs)(h.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-50,transition:{duration:.2}},className:"flex items-center space-x-3 p-3 bg-white/50 rounded-2xl border border-paydine-champagne/20",children:[(0,s.jsx)("div",{className:"relative w-14 h-14 flex-shrink-0",children:(0,s.jsx)(x.p,{src:t.image||"/placeholder.svg",alt:n,fill:!0,className:"object-contain rounded-xl"})}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("h4",{className:"font-semibold text-paydine-elegant-gray",children:n}),(0,s.jsx)("p",{className:"text-sm text-paydine-champagne font-medium",children:r(t.price)}),(0,s.jsxs)("div",{className:"inline-flex items-center mt-1 bg-paydine-rose-beige/20 rounded-full p-1 gap-2 w-auto",children:[(0,s.jsx)(b.$,{size:"icon",variant:"ghost",className:"h-7 w-7 rounded-full hover:bg-paydine-champagne/30",onClick:()=>c(t.id,i-1),children:(0,s.jsx)(y.A,{className:"h-3 w-3"})}),(0,s.jsx)("span",{className:"w-6 text-center font-semibold text-sm",children:i}),(0,s.jsx)(b.$,{size:"icon",variant:"ghost",className:"h-7 w-7 rounded-full hover:bg-paydine-champagne/30",onClick:()=>c(t.id,i+1),children:(0,s.jsx)(u.A,{className:"h-3 w-3"})})]})]}),(0,s.jsx)(b.$,{size:"icon",variant:"ghost",className:"text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full h-7 w-7",onClick:()=>d(t.id),children:(0,s.jsx)(f.A,{className:"h-3 w-3"})})]},t.id)})})}),i.length>0&&(0,s.jsx)(_,{className:"p-4 bg-gradient-to-r from-paydine-champagne/10 to-paydine-rose-beige/10 border-t border-paydine-champagne/20 mt-auto",children:(0,s.jsxs)("div",{className:"w-full space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between font-bold text-2xl text-paydine-elegant-gray",children:[(0,s.jsx)("span",{children:a("total")}),(0,s.jsx)("span",{children:r(p)})]}),(0,s.jsx)(b.$,{className:"w-full bg-gradient-to-r from-paydine-champagne to-paydine-rose-beige hover:from-paydine-champagne/90 hover:to-paydine-rose-beige/90 text-paydine-elegant-gray font-bold text-lg py-4 rounded-2xl shadow-lg transition-all duration-300 hover:shadow-xl",onClick:()=>{if(0===i.length){e({title:a("cartEmpty"),description:a("addItemsFromMenu"),variant:"destructive"});return}l(),t.push("/checkout")},children:a("proceedToPayment")})]})})]})})})}function D(e){let{categories:a,selectedCategory:t,onSelectCategory:i}=e,{t:n}=(0,o.n)(),r=(0,l.useRef)(null),[c,d]=(0,l.useState)(!1),[m,p]=(0,l.useState)(!1),x=e=>e,g=()=>{if(!r.current)return;let{scrollLeft:e,scrollWidth:a,clientWidth:t}=r.current;d(e>0),p(e<a-t-1)},y=()=>{g()};return(0,l.useEffect)(()=>{g();let e=r.current;if(e)return e.addEventListener("scroll",y),()=>e.removeEventListener("scroll",y)},[a]),(0,s.jsx)("div",{className:"relative w-full mb-8",children:(0,s.jsx)("div",{ref:r,className:(0,w.cn)("w-full overflow-x-auto scroll-smooth pb-2 no-scrollbar",c&&"mask-gradient-left",m&&"mask-gradient-right"),style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:(0,s.jsx)("div",{className:"flex space-x-3 px-4 min-w-max",children:a.map(e=>(0,s.jsxs)("button",{onClick:()=>i(e),className:(0,w.cn)("relative whitespace-nowrap rounded-2xl px-5 py-3 text-sm font-semibold transition-all duration-300",t===e?"text-theme":"text-gray-500 hover:text-theme"),children:[t===e&&(0,s.jsx)(h.P.div,{layoutId:"category-underline",className:"absolute bottom-0 left-1/4 right-1/4 h-0.5 rounded-full",style:{backgroundColor:"var(--theme-primary, #E7CBA9)"},transition:{type:"spring",stiffness:300,damping:30}}),(0,s.jsx)("span",{className:"relative z-10",children:x(e)})]},e))})})})}var I=t(55607),q=t(48279);function M(e){let{item:a,onClose:t}=e,{t:i}=(0,o.n)(),n=a?i(a.nameKey)||a.name:"",l=a?i(a.descriptionKey)||a.description:"";return(0,s.jsx)(g.N,{children:a&&(0,s.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:t,children:(0,s.jsxs)(h.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"relative bg-[#FDF8F7] rounded-3xl shadow-2xl w-full max-w-md overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(b.$,{variant:"ghost",size:"icon",onClick:t,className:"absolute top-4 right-4 z-10 bg-white/80 hover:bg-white/90 rounded-full shadow-lg border border-white/20",children:(0,s.jsx)(N.A,{className:"h-5 w-5 text-gray-600"})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"relative w-28 h-28 mx-auto mb-6",children:(0,s.jsx)(x.p,{src:a.image||"/placeholder.svg",alt:n,fill:!0,className:"object-cover rounded-2xl",style:{objectPosition:"center"}})}),(0,s.jsx)("h2",{className:"font-serif text-3xl font-bold text-paydine-elegant-gray mb-3 text-center",children:n}),(0,s.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed mb-6 text-center",children:l}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-paydine-rose-beige/10 backdrop-blur-sm rounded-2xl p-4 text-center border border-paydine-rose-beige/20",children:[(0,s.jsx)(I.A,{className:"mx-auto h-6 w-6 text-paydine-rose-beige mb-2"}),(0,s.jsxs)("div",{className:"font-bold text-paydine-elegant-gray",children:[a.calories," kcal"]}),(0,s.jsx)("div",{className:"text-xs text-paydine-elegant-gray/70 mt-1",children:i("calories")})]}),(0,s.jsxs)("div",{className:"bg-paydine-rose-beige/10 backdrop-blur-sm rounded-2xl p-4 text-center border border-paydine-rose-beige/20",children:[(0,s.jsx)(q.A,{className:"mx-auto h-6 w-6 text-paydine-rose-beige mb-2"}),(0,s.jsx)("div",{className:"font-bold text-paydine-elegant-gray",children:a.allergens.length>0?a.allergens.join(", "):i("none")}),(0,s.jsx)("div",{className:"text-xs text-paydine-elegant-gray/70 mt-1",children:i("allergens")})]})]})]})]})})})}var $=t(89852),R=t(82714),K=t(39785),H=t(35169),L=t(81586),J=t(32919),W=t(17580),V=t(5196),U=t(66474),Y=t(47863),B=t(33692),G=t(52631),X=t(27809),Z=t(40646),Q=t(99474),ee=t(52596),ea=t(30098);function et(e){let{isOpen:a,onClose:t,items:i,tableInfo:n}=e,c=(0,O.useRouter)(),{toast:p}=(0,z.dj)(),{t:f}=(0,o.n)(),{paymentOptions:j,tipSettings:v}=(0,d.W)(),{clearCart:N,addToCart:k}=(0,m.x)(),[P,C]=(0,l.useState)(!1),[A,S]=(0,l.useState)(!1),[T,_]=(0,l.useState)({}),[E,F]=(0,l.useState)(v.defaultPercentage),[D,I]=(0,l.useState)(""),[q,M]=(0,l.useState)(null),[U,Y]=(0,l.useState)({cardNumber:"",expiryDate:"",cvv:"",cardholderName:"",email:"",phone:""}),B=i.flatMap((e,a)=>Array.from({length:e.quantity}).map((t,s)=>({cartIndex:a,item:e.item,price:e.item.price||0,key:"".concat(e.item.id,"-").concat(a,"-").concat(s),quantity:1}))),G=A?Object.values(T):i.map(e=>({item:e.item,price:e.item.price||0,quantity:e.quantity})),X=(0,l.useMemo)(()=>G.reduce((e,a)=>e+a.price*(a.quantity||1),0),[G]),Z=.1*X,Q=D?Number.parseFloat(D)||0:E/100*X,et=X+Z+Q,es=async()=>{C(!0);try{let e={table_id:(null==n?void 0:n.table_id)||"7",table_name:(null==n?void 0:n.table_name)||"Table 7",location_id:(null==n?void 0:n.location_id)||1,items:G.map(e=>({menu_id:e.item.id,name:e.item.name,quantity:e.quantity||1,price:e.price,special_instructions:""})),customer_name:U.cardholderName||"".concat((null==n?void 0:n.table_name)||"Table ".concat((null==n?void 0:n.table_id)||"Unknown")," Customer"),customer_phone:U.phone||"",customer_email:U.email||"",payment_method:"cash"===q?"cash":"paypal"===q?"paypal":"card",total_amount:et,tip_amount:Q,special_instructions:""},a=await ea.u.submitOrder(e);if(a.success)C(!1),p({title:f("paymentSuccessful"),description:"Order #".concat(a.order_id," submitted successfully!")}),a.order_id&&localStorage.setItem("lastOrderId",a.order_id.toString()),setTimeout(()=>{N(),c.push("/order-placed?order_id=".concat(a.order_id||"unknown"))},500);else throw Error(a.error||"Order submission failed")}catch(e){C(!1),console.error("Order submission error:",e),p({title:"Order Failed",description:e instanceof Error?e.message:"Failed to submit order. Please try again.",variant:"destructive"})}},ei=e=>{_(a=>{let t={...a};return t[e.key]?delete t[e.key]:t[e.key]=e,t})},en=e=>{M(e)},el=()=>{M(null)},er=(e,a)=>{Y(t=>({...t,[e]:a}))},ec=e=>{let a=e.replace(/\s+/g,"").replace(/[^0-9]/gi,""),t=a.match(/\d{4,16}/g),s=t&&t[0]||"",i=[];for(let e=0,a=s.length;e<a;e+=4)i.push(s.substring(e,e+4));return i.length?i.join(" "):a},eo=e=>{let a=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return a.length>=2?a.substring(0,2)+" / "+a.substring(2,4):a},ed=[{id:"visa",icon:"/images/visa.png",name:"Visa"},{id:"mastercard",icon:"/images/mastercard.png",name:"Mastercard"},{id:"paypal",icon:"/images/paypal.png",name:"PayPal"},{id:"applepay",icon:"/images/Apple pay.png",name:"Apple Pay"},{id:"googlepay",icon:"/images/google pay.png",name:"Google Pay"},{id:"cash",icon:K.A,name:"Cash"}].filter(e=>j.find(a=>a.id===e.id&&a.enabled)),em=ed.find(e=>e.id===q);return a?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",children:(0,s.jsxs)(h.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md bg-white rounded-3xl shadow-xl border border-paydine-champagne/30 overflow-hidden flex flex-col max-h-[90vh]",children:[(0,s.jsxs)("div",{className:"p-4 pb-2 bg-gradient-to-r from-paydine-champagne/10 to-paydine-rose-beige/10 flex justify-between items-center",children:[(0,s.jsx)(b.$,{variant:"ghost",size:"sm",onClick:t,className:"text-gray-500 -ml-2",children:(0,s.jsx)(H.A,{className:"h-5 w-5"})}),(0,s.jsx)("h2",{className:"text-lg text-paydine-elegant-gray",children:f("yourOrder")}),(0,s.jsx)("div",{className:"w-8"})," "]}),(0,s.jsxs)("div",{className:"p-4 space-y-4 overflow-y-auto flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-paydine-rose-beige/10 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(W.A,{className:"h-4 w-4 text-paydine-champagne"}),(0,s.jsx)("span",{className:"text-paydine-elegant-gray text-xs",children:f("splitBill")})]}),(0,s.jsx)(b.$,{variant:A?"default":"outline",size:"sm",onClick:()=>S(!A),className:(0,ee.$)("text-xs",A?"bg-paydine-champagne text-paydine-elegant-gray hover:bg-paydine-champagne hover:text-paydine-elegant-gray":"border-paydine-champagne/30"),children:A?"ON":"OFF"})]}),A?(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-3 border border-paydine-champagne/20 overflow-hidden",children:[(0,s.jsx)("h3",{className:"text-paydine-elegant-gray mb-2 text-xs",children:f("selectItemsToPay")}),(0,s.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:B.map(e=>{var a;return(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs p-2 rounded-lg cursor-pointer hover:bg-paydine-champagne/10",onClick:()=>ei(e),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:(0,w.cn)("w-4 h-4 rounded-md border-2 flex items-center justify-center transition-all",T[e.key]?"bg-paydine-champagne border-paydine-champagne":"border-gray-300"),children:T[e.key]&&(0,s.jsx)(V.A,{className:"w-3 h-3 text-paydine-elegant-gray"})}),(0,s.jsx)("span",{className:"text-paydine-elegant-gray",children:e.item.nameKey?f(e.item.nameKey):e.item.name})]}),(0,s.jsx)("span",{className:"text-paydine-elegant-gray font-semibold",children:r(null!==(a=e.price)&&void 0!==a?a:0)})]},e.key)})})]}):(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-3 border border-paydine-champagne/20",children:[(0,s.jsx)("h3",{className:"text-paydine-elegant-gray mb-2 text-xs",children:f("orderSummary")}),(0,s.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:i.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs p-2 rounded-lg",children:[(0,s.jsxs)("span",{className:"text-paydine-elegant-gray min-w-[120px]",children:[e.quantity,"x ",e.item.nameKey?f(e.item.nameKey):e.item.name]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:a=>{a.stopPropagation(),k(e.item,-1)},className:"w-5 h-5 rounded-full bg-paydine-rose-beige flex items-center justify-center hover:bg-paydine-champagne transition-colors",children:(0,s.jsx)(y.A,{className:"w-3 h-3 text-paydine-elegant-gray"})}),(0,s.jsx)("span",{className:"text-paydine-elegant-gray font-semibold min-w-[48px] text-center",children:r((e.item.price||0)*e.quantity)}),(0,s.jsx)("button",{onClick:a=>{a.stopPropagation(),k(e.item,1)},className:"w-5 h-5 rounded-full bg-paydine-rose-beige flex items-center justify-center hover:bg-paydine-champagne transition-colors",children:(0,s.jsx)(u.A,{className:"w-3 h-3 text-paydine-elegant-gray"})})]})]},e.item.id))})]}),v.enabled&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-3 border border-paydine-champagne/20",children:[(0,s.jsx)("h3",{className:"text-paydine-elegant-gray mb-2 text-xs",children:f("addTip")}),(0,s.jsxs)("div",{className:"flex gap-2",children:[v.percentages.map(e=>(0,s.jsxs)(b.$,{variant:E!==e||D?"outline":"default",size:"sm",onClick:()=>{F(e),I("")},className:(0,ee.$)("text-xs",E!==e||D?"border-paydine-champagne/30":"bg-paydine-champagne text-paydine-elegant-gray hover:bg-paydine-champagne hover:text-paydine-elegant-gray"),children:[e,"%"]},e)),(0,s.jsxs)("div",{className:"relative flex-grow",children:[(0,s.jsx)($.p,{type:"number",placeholder:f("custom"),value:D,onChange:e=>{I(e.target.value),F(0)},className:"pl-6 border-paydine-champagne/30 text-xs h-8"}),(0,s.jsx)("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 text-xs",children:"$"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-3 space-y-1 border border-paydine-champagne/20",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-paydine-elegant-gray",children:[(0,s.jsx)("span",{children:f("subtotal")}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:r(X)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-paydine-elegant-gray",children:[(0,s.jsx)("span",{children:f("service")}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:r(Z)})]}),Q>0&&(0,s.jsxs)("div",{className:"flex justify-between text-xs text-paydine-elegant-gray",children:[(0,s.jsx)("span",{children:f("tip")}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:r(Q)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-t border-paydine-champagne/30 pt-2 mt-2",children:[(0,s.jsx)("span",{className:"text-base text-paydine-elegant-gray",children:f("total")}),(0,s.jsx)("span",{className:"text-base font-bold text-paydine-elegant-gray",children:r(et)})]})]}),(0,s.jsx)(g.N,{mode:"wait",children:q?(0,s.jsx)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"pt-2 max-h-[300px] overflow-y-auto",children:(()=>{if(!em)return null;switch(em.id){case"visa":case"mastercard":return(0,s.jsxs)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(b.$,{variant:"ghost",size:"sm",onClick:el,className:"p-2",children:(0,s.jsx)(H.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.p,{src:em.icon,alt:em.name,width:32,height:20,className:"object-contain"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:em.name})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(R.J,{htmlFor:"cardNumber",className:"text-sm font-medium text-paydine-elegant-gray",children:"Card Number"}),(0,s.jsx)($.p,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",value:U.cardNumber,onChange:e=>er("cardNumber",ec(e.target.value)),maxLength:19,className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(R.J,{htmlFor:"expiryDate",className:"text-sm font-medium text-paydine-elegant-gray",children:"Expiry Date"}),(0,s.jsx)($.p,{id:"expiryDate",type:"text",placeholder:"MM / YY",value:U.expiryDate,onChange:e=>er("expiryDate",eo(e.target.value)),maxLength:7,className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(R.J,{htmlFor:"cvv",className:"text-sm font-medium text-paydine-elegant-gray",children:"CVV"}),(0,s.jsx)($.p,{id:"cvv",type:"text",placeholder:"123",value:U.cvv,onChange:e=>er("cvv",e.target.value.replace(/\D/g,"")),maxLength:4,className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(R.J,{htmlFor:"cardholderName",className:"text-sm font-medium text-paydine-elegant-gray",children:"Cardholder Name"}),(0,s.jsx)($.p,{id:"cardholderName",type:"text",placeholder:"John Doe",value:U.cardholderName,onChange:e=>er("cardholderName",e.target.value),className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]})]})]});case"paypal":return(0,s.jsxs)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(b.$,{variant:"ghost",size:"sm",onClick:el,className:"p-2",children:(0,s.jsx)(H.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.p,{src:em.icon,alt:em.name,width:32,height:20,className:"object-contain"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:em.name})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(R.J,{htmlFor:"paypalEmail",className:"text-sm font-medium text-paydine-elegant-gray",children:"PayPal Email"}),(0,s.jsx)($.p,{id:"paypalEmail",type:"email",placeholder:"your.email@example.com",value:U.email,onChange:e=>er("email",e.target.value),className:"border-paydine-champagne/30 focus:border-paydine-champagne"})]})})]});case"applepay":case"googlepay":return(0,s.jsxs)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(b.$,{variant:"ghost",size:"sm",onClick:el,className:"p-2",children:(0,s.jsx)(H.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.p,{src:em.icon,alt:em.name,width:32,height:20,className:"object-contain"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:em.name})]})]}),(0,s.jsx)("div",{className:"text-center space-y-4",children:(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,s.jsx)(L.A,{className:"h-12 w-12 text-paydine-champagne mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"applepay"===em.id?"Apple Pay will use your default payment method and shipping address.":"Google Pay will use your default payment method and shipping address."}),(0,s.jsxs)("div",{className:"text-lg font-bold text-paydine-elegant-gray",children:["Total: ",r(et)]})]})})]});case"cash":return(0,s.jsxs)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(b.$,{variant:"ghost",size:"sm",onClick:el,className:"p-2",children:(0,s.jsx)(H.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(K.A,{className:"h-6 w-6 text-paydine-champagne"}),(0,s.jsx)("span",{className:"font-semibold text-paydine-elegant-gray",children:"Cash Payment"})]})]}),(0,s.jsx)("div",{className:"text-center space-y-4",children:(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,s.jsx)(K.A,{className:"h-12 w-12 text-paydine-champagne mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Please have the exact amount ready when the waiter comes to collect payment."}),(0,s.jsxs)("div",{className:"text-lg font-bold text-paydine-elegant-gray",children:["Total: ",r(et)]})]})})]});default:return null}})()},"payment-form"):(0,s.jsxs)(h.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3 pt-2",children:[(0,s.jsx)("h3",{className:"text-paydine-elegant-gray text-center text-sm",children:f("paymentMethods")}),(0,s.jsx)("div",{className:"flex justify-center items-center gap-3 flex-wrap",children:ed.map(e=>(0,s.jsx)(h.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,s.jsx)(b.$,{variant:"outline",className:"h-14 w-20 bg-white hover:bg-gray-50 border-gray-200 rounded-2xl shadow-sm flex items-center justify-center",onClick:()=>en(e.id),children:"string"==typeof e.icon?(0,s.jsx)(x.p,{src:e.icon,alt:e.id,width:40,height:20,className:"object-contain"}):(0,s.jsx)(e.icon,{className:"h-12 w-12 text-paydine-elegant-gray"})})},e.id))})]},"payment-methods")})]}),(0,s.jsx)(g.N,{children:q&&(0,s.jsx)(h.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"p-4 border-t border-paydine-champagne/20 bg-white",children:em?(0,s.jsx)(b.$,{onClick:es,disabled:P||!(()=>{switch(em.id){case"visa":case"mastercard":return U.cardNumber&&U.expiryDate&&U.cvv&&U.cardholderName;case"paypal":return U.email;case"applepay":case"googlepay":case"cash":return!0;default:return!1}})(),className:"w-full bg-gradient-to-r from-paydine-champagne to-paydine-rose-beige hover:from-paydine-champagne/90 hover:to-paydine-rose-beige/90 text-paydine-elegant-gray font-bold py-3 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl",children:P?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(J.A,{className:"h-4 w-4"}),(()=>{switch(em.id){case"visa":case"mastercard":return"Pay ".concat(r(et));case"paypal":return"Pay with PayPal";case"applepay":case"googlepay":return"Pay with ".concat(em.name);case"cash":return"Confirm Cash Payment";default:return"Pay"}})()]})}):null})})]})}):null}function es(e){let{item:a,onSelect:t,onFirstAdd:i}=e,n=(0,m.x)(e=>e.addToCart),{items:l}=(0,m.x)(),{t:c}=(0,o.n)(),d=l.find(e=>e.item.id===a.id),p=(null==d?void 0:d.quantity)||0,h=a.nameKey&&c(a.nameKey)?c(a.nameKey):a.name,g=a.descriptionKey&&c(a.descriptionKey)?c(a.descriptionKey):a.description;return(0,s.jsxs)("div",{className:"flex items-center space-x-4 group cursor-pointer",onClick:()=>t(a),children:[(0,s.jsx)("div",{className:"relative w-28 h-28 md:w-36 md:h-36 flex-shrink-0",children:(0,s.jsx)(x.p,{src:a.image||"/placeholder.svg",alt:h,fill:!0,className:"object-contain transition-transform duration-700 ease-in-out group-hover:scale-110"})}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-paydine-elegant-gray",children:h}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:g}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-paydine-rose-beige",children:r(a.price||0)}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(b.$,{size:"icon",variant:"ghost",className:"rounded-full bg-paydine-rose-beige text-paydine-elegant-gray hover:text-paydine-elegant-gray hover:bg-paydine-rose-beige w-12 h-12 font-bold text-lg",onClick:e=>{e.stopPropagation(),n(a),0===p&&i()},children:[p>0?(0,s.jsx)("span",{className:"text-lg font-bold text-paydine-elegant-gray",children:p}):(0,s.jsx)(u.A,{className:"h-5 w-5 text-paydine-elegant-gray"}),(0,s.jsx)("span",{className:"sr-only",children:"Add to cart"})]}),p>0&&(0,s.jsx)("span",{className:"absolute -top-2 -right-2 text-paydine-rose-beige text-base font-bold",children:"+"})]})]})]})]})}function ei(e){let{toolbarState:a,setToolbarState:t,showBillArrow:i,items:n,totalPrice:l,t:c,onCartClick:o,onWaiterClick:d,onNoteClick:m,totalItems:p}=e,y=76;return"preview"===a&&(y=180),"expanded"===a&&(y=420),(0,s.jsx)(h.P.div,{className:"fixed bottom-[1.35rem] left-1/2 -translate-x-1/2 w-full max-w-[23.04rem] z-40 px-2",animate:"expanded"===a?{height:"auto"}:{height:y},transition:{type:"spring",stiffness:300,damping:30},style:{pointerEvents:"auto"},children:(0,s.jsxs)("div",{className:" relative flex flex-col w-full h-full bg-white/70 backdrop-blur-lg rounded-[2.5rem] shadow-2xl border border-white/30 ring-1 ring-paydine-champagne/10 ",style:{minHeight:76,height:"100%"},children:[i&&(0,s.jsx)("button",{className:"absolute left-1/2 -top-4 z-10 flex items-center justify-center w-10 h-10 rounded-full bg-white/90 shadow border border-paydine-champagne/30 transition-all",style:{transform:"translateX(-50%)"},onClick:()=>t("expanded"===a?"preview":"expanded"),"aria-label":"expanded"===a?"Hide bill":"Show bill",children:"expanded"===a?(0,s.jsx)(U.A,{className:"w-5 h-5 text-paydine-champagne"}):(0,s.jsx)(Y.A,{className:"w-5 h-5 text-paydine-champagne"})}),(0,s.jsx)(g.N,{mode:"popLayout",children:("preview"===a||"expanded"===a)&&(0,s.jsx)(h.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},className:"w-full px-6 pt-8 pb-2 scrollbar-hide",style:{maxHeight:"expanded"===a?320:90,overflowY:"expanded"===a?"auto":"visible",height:"expanded"===a?"auto":void 0,msOverflowStyle:"none",scrollbarWidth:"none"},children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(g.N,{mode:"popLayout",children:n.slice("preview"===a?-1:0).map(e=>(0,s.jsxs)(h.P.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.25}},exit:{opacity:0,scale:.95,transition:{duration:.18}},className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(h.P.div,{className:"relative w-12 h-12",initial:{scale:.8},animate:{scale:1},exit:{scale:.8},children:(0,s.jsx)(x.p,{src:e.item.image||"/placeholder.svg",alt:e.item.name,fill:!0,className:"rounded-xl object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(h.P.div,{className:"font-medium text-paydine-elegant-gray text-base",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},children:e.item.name}),(0,s.jsxs)(h.P.div,{className:"text-sm text-gray-500",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},children:[r(e.item.price||0)," \xd7 ",e.quantity]})]})]}),(0,s.jsx)(h.P.div,{className:"font-semibold text-paydine-rose-beige text-lg",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:r((e.item.price||0)*e.quantity)})]},e.item.id))})}),"expanded"===a&&(0,s.jsx)(h.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"mt-4 pt-4 border-t border-paydine-champagne/30 bg-paydine-rose-beige/10 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(h.P.span,{className:"font-bold text-paydine-elegant-gray text-lg",initial:{x:-10,opacity:0},animate:{x:0,opacity:1},children:"Total"}),(0,s.jsx)(h.P.span,{className:"font-bold text-2xl text-paydine-champagne",initial:{x:10,opacity:0},animate:{x:0,opacity:1},children:r(l)})]})})]})},"bill")}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-8 px-8 py-4",style:{minHeight:76,borderBottomLeftRadius:"2.5rem",borderBottomRightRadius:"2.5rem",background:"transparent",marginTop:"auto"},children:[(0,s.jsx)(h.P.button,{whileTap:{scale:.92},whileHover:{scale:1.12},className:"flex items-center justify-center focus:outline-none transition-all",style:{background:"none",border:"none",padding:0,margin:0},onClick:d,"aria-label":c("callWaiter"),children:(0,s.jsx)(B.A,{className:"h-8 w-8 text-paydine-elegant-gray"})}),(0,s.jsx)(h.P.button,{whileTap:{scale:.92},whileHover:{scale:1.12},className:"flex items-center justify-center focus:outline-none transition-all",style:{background:"none",border:"none",padding:0,margin:0},onClick:m,"aria-label":c("leaveNote"),children:(0,s.jsx)(G.A,{className:"h-8 w-8 text-paydine-elegant-gray"})}),(0,s.jsxs)(h.P.button,{whileTap:{scale:.92},whileHover:{scale:1.12},className:"flex items-center justify-center relative focus:outline-none transition-all",style:{background:"none",border:"none",padding:0,margin:0},onClick:o,"aria-label":c("viewCart"),children:[(0,s.jsx)(X.A,{className:"h-8 w-8 text-paydine-elegant-gray"}),p>0&&(0,s.jsx)("span",{className:"absolute -top-2 -right-2 bg-paydine-rose-beige text-paydine-elegant-gray text-xs font-bold rounded-full h-7 w-7 flex items-center justify-center shadow-md",children:p})]})]})]})})}function en(){return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-paydine-champagne border-t-transparent rounded-full animate-spin"})})}let el=e=>{let{isOpen:a,onOpenChange:t}=e,{t:i}=(0,o.n)(),[n,r]=(0,l.useState)("confirming"),[c,d]=(0,l.useState)(!1),m=async()=>{r("confirmed"),d(!0),await new Promise(e=>setTimeout(e,800)),await new Promise(e=>setTimeout(e,2e3)),d(!1),await new Promise(e=>setTimeout(e,300)),t(!1),r("confirming")},p=async()=>{r("closing"),await new Promise(e=>setTimeout(e,300)),t(!1),r("confirming")};return(0,s.jsx)(g.N,{children:a&&(0,s.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,s.jsx)(h.P.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:"closing"===n?.95:1,opacity:+("closing"!==n),y:20*("closing"===n)},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",stiffness:300,damping:25},className:"bg-white rounded-3xl shadow-2xl w-full max-w-sm mx-4 overflow-hidden",children:(0,s.jsx)(g.N,{mode:"wait",children:c?(0,s.jsxs)(h.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-paydine-rose-beige/50 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(Z.A,{className:"w-8 h-8 text-paydine-elegant-gray"})}),(0,s.jsx)("h3",{className:"text-2xl font-semibold text-paydine-elegant-gray mb-2",children:i("waiterComing")})]},"success"):(0,s.jsxs)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-paydine-rose-beige/50 hover:bg-paydine-champagne rounded-full flex items-center justify-center mb-4 transition-all duration-300",children:(0,s.jsx)(B.A,{className:"w-8 h-8 text-paydine-elegant-gray"})}),(0,s.jsx)("h3",{className:"text-2xl font-semibold text-paydine-elegant-gray mb-2",children:i("callWaiter")}),(0,s.jsx)("p",{className:"text-paydine-elegant-gray/80",children:i("callWaiterConfirm")})]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,s.jsx)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:p,className:"flex-1 py-3 px-6 rounded-xl bg-gray-100 text-paydine-elegant-gray font-medium hover:bg-gray-200 transition-colors",children:i("no")}),(0,s.jsx)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,className:"flex-1 py-3 px-6 rounded-xl bg-paydine-rose-beige/50 hover:bg-paydine-champagne text-paydine-elegant-gray font-medium transition-all duration-300",children:i("yes")})]})]},"confirm")})})})})},er=e=>{let{isOpen:a,onOpenChange:t,note:i,setNote:n,onSend:r}=e,{t:c}=(0,o.n)(),[d,m]=(0,l.useState)("editing"),[p,x]=(0,l.useState)(!1),y=async()=>{i.trim()&&(m("confirmed"),x(!0),await new Promise(e=>setTimeout(e,800)),await new Promise(e=>setTimeout(e,2e3)),x(!1),await new Promise(e=>setTimeout(e,300)),r(),t(!1),m("editing"))},u=async()=>{m("closing"),await new Promise(e=>setTimeout(e,300)),t(!1),m("editing")};return(0,s.jsx)(g.N,{children:a&&(0,s.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,s.jsx)(h.P.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:"closing"===d?.95:1,opacity:+("closing"!==d),y:20*("closing"===d)},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",stiffness:300,damping:25},className:"bg-white rounded-3xl shadow-2xl w-full max-w-sm mx-4 overflow-hidden",children:(0,s.jsx)(g.N,{mode:"wait",children:p?(0,s.jsxs)(h.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-paydine-rose-beige/50 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(Z.A,{className:"w-8 h-8 text-paydine-elegant-gray"})}),(0,s.jsx)("h3",{className:"text-2xl font-semibold text-paydine-elegant-gray mb-2",children:c("messageReceived")})]},"success"):(0,s.jsxs)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"mx-auto w-16 h-16 bg-paydine-rose-beige/50 hover:bg-paydine-champagne rounded-full flex items-center justify-center mb-4 transition-all duration-300",children:(0,s.jsx)(G.A,{className:"w-8 h-8 text-paydine-elegant-gray"})}),(0,s.jsx)("h3",{className:"text-2xl font-semibold text-paydine-elegant-gray mb-2",children:c("leaveNoteTitle")}),(0,s.jsx)("p",{className:"text-paydine-elegant-gray/80",children:c("leaveNoteDesc")})]}),(0,s.jsx)(Q.T,{placeholder:c("notePlaceholder"),value:i,onChange:e=>n(e.target.value),className:"bg-white border-paydine-champagne/30 rounded-xl min-h-[100px] w-full mb-4"}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,s.jsx)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,className:"flex-1 py-3 px-6 rounded-xl bg-gray-100 text-paydine-elegant-gray font-medium hover:bg-gray-200 transition-colors",children:c("cancel")}),(0,s.jsx)(h.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,className:"flex-1 py-3 px-6 rounded-xl bg-paydine-rose-beige/50 hover:bg-paydine-champagne text-paydine-elegant-gray font-medium transition-all duration-300",children:c("sendNote")})]})]},"edit")})})})})};function ec(){let[e,a]=(0,l.useState)(!1),[t,i]=(0,l.useState)("All"),[r,x]=(0,l.useState)(null),[h,g]=(0,l.useState)("collapsed"),[y,u]=(0,l.useState)(null),[f,b]=(0,l.useState)(!1),[j,v]=(0,l.useState)(!0),[N,w]=(0,l.useState)([]),[k,P]=(0,l.useState)([]),{menuItems:C}=(0,d.W)(),{items:A,toggleCart:S,addToCart:T,setTableInfo:_}=(0,m.x)(),{t:E}=(0,o.n)(),[z,I]=(0,l.useState)(!1),[q,$]=(0,l.useState)(!1),[R,K]=(0,l.useState)(""),[H,L]=(0,l.useState)(null),J=(0,O.useSearchParams)();(0,l.useEffect)(()=>{i("All")},[]),(0,l.useEffect)(()=>{N.length>0&&i("All")},[N]),(0,l.useEffect)(()=>{(async function(){try{v(!0);let e=J.get("table_id"),a=J.get("qr");if(e)try{let t=await ea.u.getTableInfo(e,a||void 0);t.success&&(L(t.data),_({table_id:t.data.table_id,table_name:t.data.table_name,location_id:t.data.location_id,qr_code:t.data.qr_code}))}catch(e){console.error("Failed to fetch table info:",e)}let t=await (0,c.Gq)();w(t.menuItems),P(t.categoryNames)}catch(e){console.error("Failed to load menu data:",e),w(c.K$),P(c.LZ),i("All")}finally{v(!1)}})()},[J,_]);let W=(0,l.useMemo)(()=>["All",...k.length>0?k:["Appetizer","Mains","Desserts","Drinks"]],[k]),V=(0,l.useMemo)(()=>{let e=N.length?N:C.length?C:c.K$,a=t||"All";return"All"===a?e:e.filter(e=>e.category===a)},[N,C,t]);(0,l.useEffect)(()=>{N.length>0&&!t&&i("All")},[N,t]);let U=A.reduce((e,a)=>e+a.quantity,0),Y=A.reduce((e,a)=>e+(a.item.price||0)*a.quantity,0),B=e=>{"collapsed"===h&&g("preview");let a=A.find(a=>a.item.id===e.id);a&&u(a)},G=e=>{x(e);let a=A.find(a=>a.item.id===e.id);a&&u(a)},X=async()=>{if(R.trim())try{await ea.u.callWaiter((null==H?void 0:H.table_id)||"7",R,null==H?void 0:H.table_name),K(""),I(!1),toast({title:"Message Sent",description:"Your message has been sent to the waiter!"})}catch(e){console.error("Failed to send note:",e),toast({title:"Message Failed",description:"Failed to send message. Please try again.",variant:"destructive"})}};return((0,l.useEffect)(()=>{a(!0)},[]),e)?(0,s.jsxs)("div",{className:"jsx-2b8365bf2703af0e relative min-h-screen w-full bg-theme pb-32",children:[(0,s.jsx)("header",{className:"jsx-2b8365bf2703af0e py-8",children:(0,s.jsx)("div",{className:"jsx-2b8365bf2703af0e max-w-4xl mx-auto px-4",children:(0,s.jsx)(p.g,{tableNumber:null==H?void 0:H.table_name})})}),(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)(en,{}),children:(0,s.jsxs)("main",{className:"jsx-2b8365bf2703af0e max-w-4xl mx-auto",children:[(0,s.jsx)(D,{categories:W,selectedCategory:t||"All",onSelectCategory:e=>{i(e),e||i("All")}}),(0,s.jsx)("section",{className:"jsx-2b8365bf2703af0e w-full mb-12",children:(0,s.jsx)("div",{className:"jsx-2b8365bf2703af0e grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-8 px-4",children:V.map(e=>(0,s.jsx)(es,{item:e,onSelect:G,onFirstAdd:()=>B(e)},e.id))})})]})}),(0,s.jsx)(n(),{id:"2b8365bf2703af0e",children:"@-webkit-keyframes btn-bounce{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}100%{-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes btn-bounce{0%{-moz-transform:scale(1);transform:scale(1)}40%{-moz-transform:scale(1.2);transform:scale(1.2)}100%{-moz-transform:scale(1);transform:scale(1)}}@-o-keyframes btn-bounce{0%{-o-transform:scale(1);transform:scale(1)}40%{-o-transform:scale(1.2);transform:scale(1.2)}100%{-o-transform:scale(1);transform:scale(1)}}@keyframes btn-bounce{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.2);-moz-transform:scale(1.2);-o-transform:scale(1.2);transform:scale(1.2)}100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}.btn-animate{-webkit-animation:btn-bounce.7s cubic-bezier(.4,2,.6,1);-moz-animation:btn-bounce.7s cubic-bezier(.4,2,.6,1);-o-animation:btn-bounce.7s cubic-bezier(.4,2,.6,1);animation:btn-bounce.7s cubic-bezier(.4,2,.6,1)}.btn-glow{-webkit-box-shadow:0 0 0 8px rgba(255,228,181,.5),0 0 16px 4px rgba(200,155,108,.3);-moz-box-shadow:0 0 0 8px rgba(255,228,181,.5),0 0 16px 4px rgba(200,155,108,.3);box-shadow:0 0 0 8px rgba(255,228,181,.5),0 0 16px 4px rgba(200,155,108,.3)}"}),(0,s.jsx)(ei,{toolbarState:h,setToolbarState:g,showBillArrow:U>0&&"collapsed"!==h,items:"preview"===h&&y?[y]:A,totalPrice:Y,t:E,onCartClick:()=>{A.length>0&&b(!0)},onWaiterClick:()=>$(!0),onNoteClick:()=>I(!0),totalItems:U}),(0,s.jsx)(F,{}),(0,s.jsx)(M,{item:r,onClose:()=>x(null)}),(0,s.jsx)(et,{isOpen:f,onClose:()=>b(!1),items:A,tableInfo:H}),(0,s.jsx)(el,{isOpen:q,onOpenChange:$}),(0,s.jsx)(er,{isOpen:z,onOpenChange:I,note:R,setNote:K,onSend:X})]}):(0,s.jsx)(en,{})}function eo(){return(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(ec,{})})}},99474:(e,a,t)=>{"use strict";t.d(a,{T:()=>l});var s=t(95155),i=t(12115),n=t(53999);let l=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...i})});l.displayName="Textarea"}},e=>{var a=a=>e(e.s=a);e.O(0,[9352,6874,8009,3463,6766,4150,8808,98,292,1749,8441,1684,7358],()=>a(11202)),_N_E=e.O()}]);