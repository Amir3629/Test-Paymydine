(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{53999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(52596),a=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},68549:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(95155),a=r(12115),n=r(23464),i=r(49509);let l=n.A.create({baseURL:i.env.NEXT_PUBLIC_API_URL||"http://amir.paymydine.com/api",withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),l.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth-token"),window.location.href="/login"),Promise.reject(e)});var d=r(97168),c=r(88482),o=r(74466),u=r(53999);let m=(0,o.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function x(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,u.cn)(m({variant:r}),t),...a})}var h=r(35695);function g(){let{user:e,logout:t,loading:r}=function(){let[e,t]=(0,a.useState)(null),[r,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{localStorage.getItem("auth-token")?l.get("/user").then(e=>{t(e.data)}).catch(()=>{localStorage.removeItem("auth-token")}).finally(()=>{s(!1)}):s(!1)},[]),{user:e,loading:r,login:async(e,r)=>{try{let{user:s,token:a}=(await l.post("/login",{email:e,password:r})).data;return localStorage.setItem("auth-token",a),t(s),s}catch(e){throw e}},register:async(e,r,s,a)=>{try{let{user:n,token:i}=(await l.post("/register",{name:e,email:r,password:s,password_confirmation:a})).data;return localStorage.setItem("auth-token",i),t(n),n}catch(e){throw e}},logout:()=>{localStorage.removeItem("auth-token"),t(null)}}}(),[n,i]=(0,a.useState)([]),[o,u]=(0,a.useState)([]),[m,g]=(0,a.useState)(!0),f=(0,h.useRouter)();(0,a.useEffect)(()=>{if(!r&&!e){f.push("/login");return}e&&p()},[e,r,f]);let p=async()=>{try{let[e,t]=await Promise.all([l.get("/menu"),l.get("/orders")]);i(e.data.categories),u(t.data.orders)}catch(e){console.error("Error fetching data:",e)}finally{g(!1)}},v=async()=>{try{let e=await l.post("/orders",{items:[{id:1,quantity:2},{id:3,quantity:1}],total:42.97});console.log("Order created:",e.data),p()}catch(e){console.error("Error creating order:",e)}};return r||m?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-gray-900 mx-auto"}),(0,s.jsx)("p",{className:"mt-4",children:"Loading..."})]})}):e?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white shadow",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"PayMyDine Dashboard"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Welcome, ",e.name,"!"]})]}),(0,s.jsx)(d.$,{onClick:()=>{t(),f.push("/login")},variant:"outline",children:"Logout"})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)(c.Zp,{children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsx)(c.ZB,{children:"Menu"}),(0,s.jsx)(c.BT,{children:"Available items from our restaurant"})]}),(0,s.jsx)(c.Wu,{children:(0,s.jsx)("div",{className:"space-y-6",children:n.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3",children:e.name}),(0,s.jsx)("div",{className:"space-y-2",children:e.items.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,s.jsxs)("span",{className:"font-semibold text-green-600",children:["$",e.price]})]},e.id))})]},e.id))})})]}),(0,s.jsxs)(c.Zp,{children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsx)(c.ZB,{children:"Recent Orders"}),(0,s.jsx)(c.BT,{children:"Your order history"})]}),(0,s.jsxs)(c.Wu,{children:[(0,s.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium",children:["Order #",e.id]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.created_at).toLocaleDateString()})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-semibold",children:["$",e.total]}),(0,s.jsx)(x,{variant:"completed"===e.status?"default":"secondary",children:e.status})]})]},e.id))}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(d.$,{onClick:v,className:"w-full",children:"Create Test Order"})})]})]})]}),(0,s.jsxs)(c.Zp,{className:"mt-8",children:[(0,s.jsx)(c.aR,{children:(0,s.jsx)(c.ZB,{children:"Account Information"})}),(0,s.jsx)(c.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Name"}),(0,s.jsx)("p",{className:"font-medium",children:e.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Email"}),(0,s.jsx)("p",{className:"font-medium",children:e.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"User ID"}),(0,s.jsx)("p",{className:"font-medium",children:e.id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"API Status"}),(0,s.jsx)(x,{variant:"default",children:"Connected"})]})]})})]})]})]}):null}},88482:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>l});var s=r(95155),a=r(12115),n=r(53999);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},88897:(e,t,r)=>{Promise.resolve().then(r.bind(r,68549))},97168:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(95155),a=r(12115),n=r(99708),i=r(74466),l=r(53999);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:c=!1,...o}=e,u=c?n.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(d({variant:a,size:i,className:r})),ref:t,...o})});c.displayName="Button"}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,9641,794,8441,1684,7358],()=>t(88897)),_N_E=e.O()}]);